<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Generator</title>
    <link href="https://ichengchao.oss-cn-hangzhou.aliyuncs.com/static/css/bootstrap.min.4_3_1.css" rel="stylesheet">
    <script type="text/javascript"
        src="https://ichengchao.oss-cn-hangzhou.aliyuncs.com/static/jslib/jquery.min.js"></script>
    <script type="text/javascript">
        let task;
        $(document).ready(function () {
            $("#btn_config").on("click", function () {
                let accessKeyId = $("input[name='accessKeyId']").val();
                let accessKeySecret = $("input[name='accessKeySecret']").val();
                let idpProviderName = $('input[name="idpProviderName"]').val();
                let roleJson = $('textarea[name="roleJson"]').val();

                $("#msgBox").show();
                $("#msgBox").delay(1000).hide(500);

                $.ajax({
                    url: "../../sso/ssoConfig.do",
                    data: {
                        accessKeyId: accessKeyId,
                        accessKeySecret: accessKeySecret,
                        idpProviderName: idpProviderName,
                        roleJson: roleJson
                    },
                    success: function (result) {
                        $("#consoleDiv").html(result);
                    }
                });

            });
        });
    </script>
</head>

<body>
    <div class="container">
        <h4>SSO自动化配置</h4>
        <hr>
        <div class="form-group">
            <label>
                <h6>AccessKeyId</h6>
            </label>
            <input class="form-control" name="accessKeyId" placeholder="必填">
        </div>

        <div class="form-group">
            <label>
                <h6>AccessKeySecret</h6>
            </label>
            <input class="form-control" name="accessKeySecret" type="password" placeholder="必填">
        </div>

        <div class="form-group">
            <label>
                <h6>IDP名称</h6>
            </label>
            <input class="form-control" name="idpProviderName" placeholder="必填">
        </div>

        <div class="form-group">
            <label>
                <h6>角色列表(JSON)</h6>
            </label>
            <textarea class="form-control" name="roleJson" placeholder="必填" rows="6"></textarea>
        </div>
        <br>

        <button id="btn_config" class="btn btn-success">&nbsp;&nbsp;开始配置&nbsp;&nbsp;</button>

        <br>
        <div id="msgBox" style="display:none" class="alert alert-success" role="alert">
            已经提交,请耐心等待!
        </div>
        <br>
        <div id="consoleDiv" style="background-color: black;color: #adb5bd;word-break: break-all;padding: 10px;">
            waiting...
        </div>
    </div>
</body>

</html>