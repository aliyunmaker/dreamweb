<!DOCTYPE html>
<html lang="en">
<head>
    <!-- <meta charset="utf-8">  -->
	<!-- <title>test</title> -->
	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>test</title>

    <!-- <link href="https://dream-web.oss-cn-hangzhou.aliyuncs.com/static/css/bootstrap.min.4_3_1.css" rel="stylesheet"> -->
    <!-- <script type="text/javascript"
            src="https://dream-web.oss-cn-hangzhou.aliyuncs.com/static/jslib/jquery.min.js"></script> -->
    <!-- <script type="text/javascript" src="../slsView/bootstrap.bundle.js"></script> -->
    <script type="text/javascript" src="serviceCatalogView.js"></script>
    <script type="text/javascript">
        // var search = window.location.search.substring(1);
        // var urlsp = new URLSearchParams(search);
        // var productId = urlsp.get("productId");
        // var productName = urlsp.get("productName");
        var productId;
        var roleId;

        window.onload = function() {
            $.ajax({
                url:'../userRole/getRoleId.do',
                success: function (result) {
                    console.log(result);
                    roleId = result.data;
                    if(roleId == null) {
                        alert("您还未选择角色！");
                        window.location.href = "http://localhost:8080/metadata/metadataManage.html";
                    }
                }
            })

        }
        var data;
        $.ajax({
            url: "../../userProduct/searchUserProductByUserName.do",
            success: function (result) {
                if(isTrue(result.success)) {
                    data= result.data;
                    console.log(data);
                    console.log(data[0]);
                    console.log(data[0].productName);
                    console.log(data.length);
                    var count = data.length;
                    for(var i = 0; i < count;i++) {
                        console.log(data[i].productName);
                        console.log(data[i].id);
                        console.log(data[i].servicecatalogProductId);

                        var servicecatalogProductId = data[i].servicecatalogProductId;
                        var productName = data[i].productName;

                        var li;
                        if(i == 0) {
                            li = $("<li />", {"class":"active"});
                        } else {
                            li = $("<li />", {});
                        }
                        console.log(li);
                        var a = $("<a />", {
                        "href": "#basic",
                        "text": data[i].productName,
                        "data-toggle":"tab" ,
                        "style":"font-size: medium;",
                        "test":servicecatalogProductId,
                        "click": function (e) {
                            console.log(e);
                            // productId = t;
                            // console.log(productId);
                        }
                        });
                        li.append(a);
                        $('#myTab').append(li);

                    }
                    // var li = $("<li />", {"id": options.id + "-li",});
                } else {
                    alert(result.errorMsg);
                }
            }
        })



        console.log(roleId);
        console.log(productId);


    </script>

</head>
<body>
<div class="block" id="whole">

    <div class="block" style="height: 50px;position: fixed;right: 10px; left: 10px;">
        <h2 style="margin-top: 0.6%;" class="text-center" >云资源申请</h2>
    </div>

    <ul id="myTab" class="nav nav-tabs"style="height: auto;width:auto;position: fixed;right: 10px; left: 10px;top: 50px;">
        <!-- <c:forEach items="${data}" var="product" >
            <li>
                <a href="#basic" data-toggle="tab" style="font-size: medium;" >
                    ${product.productName}
                </a>
            </li>

        </c:forEach> -->
        <!-- <li class="active">
            <a href="#basic" data-toggle="tab" style="font-size: medium;" id="test">
                
            </a>
        </li> -->
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                SLB
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                RDS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                容器服务
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                OSS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                SLS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                KMS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                DRDS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                AnalyticDB
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                DMS企业版
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                HBase
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                DTS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                云企业网CEN
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                NAS
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                MongoDB
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                PrivateZone
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                EIP
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                磁盘
            </a>
        </li>
        <li>
            <a href="#basic" data-toggle="tab" style="font-size: medium;">
                镜像
            </a>
        </li>
    </ul>

    <div id="myTabContent" class="tab-content" style="margin-right: 10px;">
        <div class="tab-pane fade in active alert alert-warning alert-dismissble" id="basic" style="color:black;height:210px;width: auto;position: fixed;right: 10px; left: 10px;top: 100px;">
            
            <div style="height: 1px;">
            <label style="font-size: large;text-align:left;font-weight: 420;height: 1px" for="basic">基本参数</label>

            
            </div>
            <div class="block" style="width: 100%;height: 90%;margin-top: 25px;">

                <div class="block" style="width:50%;height:24%;text-align:center;">
                    <label style="font-size: medium; text-align:right;width: 250px;" for="select_app">应用：</label>
                    <select style="padding-top: 0%;padding-bottom: 0%; font-size: medium;width:250px;height:28px;text-align:center;" class="custom-select" id="select_app">
                        <option selected>选择应用</option>
                    </select>
                </div>

                <div class="block" style="width:50%;height:24%;text-align:center;">
                    <label style="font-size: medium;text-align:right;width: 250px;" for="select_environment">环境：</label>
                    <select style="padding-top: 0%;padding-bottom: 0%;font-size: medium;width:250px;height:28px;text-align:center;" class="custom-select" id="select_environment">
                        <option selected>选择环境</option>
                    </select>
                </div>

                <div class="block" style="width:50%;height:24%;text-align:center;">
                    <label style="font-size: medium;text-align:right;width: 250px;"for="select_region">地域：</label>
                    <select style="padding-top: 0%;padding-bottom: 0%;font-size: medium;width:250px;height:28px;text-align:center;" class="custom-select" id="select_region">
                        <option selected="selected">选择地域</option>
                        <option >杭州</option>
                        <option >上海</option>
                    </select>
                </div>

                <div class="block" style="width:50%;height:24%;text-align:center;">
                    <label style="font-size: medium;text-align:right;width: 80px;"for="btn_getExample"></label>
                    <button style="padding-top: 0%;padding-bottom: 0%;font-size: medium;height:28px;background-color: cornflowerblue; color:white;width:80px;"type="button" id="btn_getExample" class="btn btn-info">下一步</button>
                </div>

            </div>
        </div>

        <div class="block" style="background-color: white; border-style:solid;border-width:0.4vh;border-color:red;position: fixed;top: 315px;right: 10px; left: 10px;height: calc(100% - 320px);">
            <div class="block" id="kongbai2" style="background:white; color:rgb(5, 5, 5);width: auto;margin-left: 1%;margin-right: 1%;height: 5%;">
                <label style="font-size: large;text-align:left;width: 100%;margin-top: 0.3%;font-weight: 420;" for="kongbai2">服务目录</label>
            </div>

            <div class="embed-responsive embed-responsive-1by1" id="serviceCatalogViewConsoleDiv" style="zoom:90%; background:white; color:#FFF;width: auto; margin-left: 10px;margin-right: 10px;height: 95%;">

            </div>

        </div>
    </div>
</div>

<script>
    console.log(22222);
    $(function(){
        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            console.log(111111111);
            // 获取已激活的标签页的名称
            var activeTab = $(e.target).text(); 
            // 获取前一个激活的标签页的名称
            var previousTab = $(e.relatedTarget).text(); 
            $(".active-tab span").html(activeTab);
            $(".previous-tab span").html(previousTab);
        });
    });
</script>
</body>
</html>