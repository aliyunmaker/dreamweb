<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cc.landingzone.dreamweb.dao.ApplyDao">

    <select id="listApply"
            resultType="cc.landingzone.dreamweb.model.Apply">
        select *
        from myAsk
        where starterName = #{starterName}
        order by id desc
    </select>

    <select id="listApplyPreviewInProgress"
            resultType="cc.landingzone.dreamweb.model.Apply">
        select *
        from myAsk
        where processState = "预检中"
    </select>

    <select id="getApplyByPlanId" resultType="cc.landingzone.dreamweb.model.Apply">
        select *
        from myAsk
        where planId = #{planId}
    </select>

    <update id="updateProcessState">
        update myAsk
        set processState = #{processState}
        where processId = #{processId}
    </update>

    <update id="updateTaskByProcessId">
        update myAsk
        set task = #{task}
        where processId = #{processId}
    </update>

    <update id="updateTaskByPlanId">
        update myAsk
        set task = #{task}
        where planId = #{planId}
    </update>

    <update id="updateStatusByPlanId">
        update myAsk
        set processState = #{status}
        where planId = #{planId}
    </update>

    <update id="updatePlanResultByPlanId">
        update myAsk
        set planResult = #{planResult}
        where planId = #{planId}
    </update>

    <update id="updateProcessIdByPlanId">
        update myAsk
        set processId = #{processId}
        where planId = #{planId}
    </update>

    <update id="updateCond">
        update myAsk
        set cond = #{cond}
        where processId = #{processId}
    </update>

    <update id="updateOpinion">
        update myAsk
        set opinion = #{opinion}
        where processId = #{processId}
    </update>

    <update id="updateStatus">
        update myAsk
        set processState = #{status}
        where planId = #{planId}
    </update>

    <insert id="saveApply"
            parameterType="cc.landingzone.dreamweb.model.Apply">
        insert into myAsk
        (starterName,
        roleId,
        application,
        scene,
        processTime,
        processId,
        exampleName,
        productName,
        processState,
        portfolioId,
        parameters,
        productId,
        planId,
        region,
        versionid,
        cond,
        processDefinitionId,
        gmt_create)
        values (#{starterName},
        #{roleId},
        #{application},
        #{scene},
        #{processTime},
        #{processId},
        #{exampleName},
        #{productName},
        #{processState},
        #{portfolioId},
        #{parameters},
        #{productId},
        #{planId},
        #{region},
        #{versionId},
        #{cond},
        #{processDefinitionId},
        now())
    </insert>
</mapper>